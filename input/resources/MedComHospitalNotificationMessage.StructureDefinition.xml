<?xml version="1.0" encoding="utf-8"?>
<StructureDefinition xmlns="http://hl7.org/fhir">
  <id value="medcom-hospital-notification-message" />
  <url value="http://medcom.dk/fhir/StructureDefinition/medcom-hospitalNotificationMessage" />
  <name value="MedComHospitalNotificationMessage" />
  <status value="draft" />
  <fhirVersion value="4.0.0" />
  <mapping>
    <identity value="v2" />
    <uri value="http://hl7.org/v2" />
    <name value="HL7 v2 Mapping" />
  </mapping>
  <mapping>
    <identity value="rim" />
    <uri value="http://hl7.org/v3" />
    <name value="RIM Mapping" />
  </mapping>
  <mapping>
    <identity value="cda" />
    <uri value="http://hl7.org/v3/cda" />
    <name value="CDA (R2)" />
  </mapping>
  <mapping>
    <identity value="w5" />
    <uri value="http://hl7.org/fhir/fivews" />
    <name value="FiveWs Pattern Mapping" />
  </mapping>
  <kind value="resource" />
  <abstract value="false" />
  <type value="Bundle" />
  <baseDefinition value="http://medcom.dk/fhir/StructureDefinition/medcom-messaging-message" />
  <derivation value="constraint" />
  <differential>
    <element id="Bundle">
      <path value="Bundle" />
      <short value="MedCom Message - Hospital Notification" />
      <definition value="A container for a MedComHospitalNotificationMessage. The message is triggerede as patients is admitted, onleave or finished a hospital stay in order to notify the relevant Municipalicy home care." />
    </element>
    <element id="Bundle.entry:messageHeader">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <path value="Bundle.entry" />
      <sliceName value="messageHeader" />
    </element>
    <element id="Bundle.entry:messageHeader.resource.event[x]">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <path value="Bundle.entry.resource.event[x]" />
      <code>
        <code value="HospitalNotification" />
      </code>
      <short value="Code for the this event" />
      <definition value="Code for the this event based on encounter status and class" />
      <binding>
        <extension url="http://hl7.org/fhir/StructureDefinition/elementdefinition-bindingName">
          <valueString value="MessageEvent" />
        </extension>
        <extension url="http://hl7.org/fhir/StructureDefinition/elementdefinition-isCommonBinding">
          <valueBoolean value="true" />
        </extension>
        <strength value="example" />
        <description value="Message event defined as part of this version of FHIR." />
      </binding>
    </element>
    <element id="Bundle.entry:messageHeader.resource.destination:cc">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-explicit-type-name">
        <valueString value="MessageDestination" />
      </extension>
      <path value="Bundle.entry.resource.destination" />
      <sliceName value="cc" />
      <max value="1" />
    </element>
    <element id="Bundle.entry:messageHeader.resource.focus">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <path value="Bundle.entry.resource.focus" />
      <short value="The content of the message - Ressource" />
      <definition value="The actual data of the message - a reference to the root/focus resource of the event. For Hospital Notification the resource in focus is HospitalNotificationEncounter" />
      <min value="1" />
      <max value="1" />
      <type>
        <code value="Reference" />
        <targetProfile value="http://medcom.dk/fhir/StructureDefinition/medcom-hospitalNotificationEncounter" />
        <aggregation value="bundled" />
      </type>
    </element>
    <element id="Bundle.entry:messageOrganization">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <path value="Bundle.entry" />
      <sliceName value="messageOrganization" />
      <min value="1" />
    </element>
    <element id="Bundle.entry:organization">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <path value="Bundle.entry" />
      <sliceName value="organization" />
      <short value="The encounter responsible" />
      <definition value="The encounter organization. The encounter may be the same organization as the sender organization. This is often the case in smaller organizations. In organizations like hospitals the sender and encounter organization is typicaly different branches of the same root organization.  The organization resource (MedComCoreOrganization) is referenced by the MedComHospitalNotificationOrganizaition ressource." />
      <min value="1" />
      <max value="1" />
    </element>
    <element id="Bundle.entry:organization.resource">
      <path value="Bundle.entry.resource" />
      <min value="1" />
      <type>
        <code value="Resource" />
        <profile value="http://medcom.dk/fhir/StructureDefinition/medcom-core-organization" />
      </type>
    </element>
    <element id="Bundle.entry:hospitalNotifcationEncounter">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <path value="Bundle.entry" />
      <sliceName value="hospitalNotifcationEncounter" />
      <short value="Focus Entry in the bundle - will have a resource" />
      <definition value="Focus entry in a bundle resource - will econtain a MedComHospitalNotificationEncounter resource ." />
      <min value="1" />
      <max value="1" />
    </element>
    <element id="Bundle.entry:hospitalNotifcationEncounter.resource">
      <path value="Bundle.entry.resource" />
      <min value="1" />
      <type>
        <code value="Resource"  />
        <profile value="http://medcom.dk/fhir/StructureDefinition/medcom-hospitalNotificationEncounter" />
      </type>
    </element>
    <element id="Bundle.entry:patient">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <path value="Bundle.entry" />
      <sliceName value="patient" />
      <short value="Entry in the bundle - will have a Patient resource" />
      <definition value="An entry in a bundle resource - will contain a Patient resource (MedComCorePatient)" />
      <min value="1" />
      <max value="1" />
    </element>
    <element id="Bundle.entry:patient.resource">
      <path value="Bundle.entry.resource" />
      <min value="1" />
      <type>
        <code value="Resource" />
        <profile value="http://hl7.org/fhir/dk/core/StructureDefinition/medcom-core-patient" />
      </type>
    </element>
  </differential>
</StructureDefinition>
