<?xml version="1.0" encoding="utf-8"?>
<StructureDefinition xmlns="http://hl7.org/fhir">
  <id value="medcom-hospital-notification-encounter" />
  <url value="http://medcom.dk/fhir/StructureDefinition/medcom-hospitalNotificationEncounter" />
  <version value="0.2" />
  <name value="MedComHospitalNotificationEncounter" />
  <status value="draft" />
  <description value="Encounter derivation that handles hospital notification when a patient is admitted to a hospital. The hospital notification is always send from a hospital. The receiver of the message is the patients home municipalicy. The hospital notification is send for example when patient is admitted, on leave, returned from leave, finished hospital stay." />
  <purpose value="Service that allows the home care of the municipalicy to react when patient is admitted or finished hospital stay in order to react accordingly" />
  <fhirVersion value="4.0.0" />
  <kind value="resource" />
  <abstract value="false" />
  <type value="Encounter" />
  <baseDefinition value="http://medcom.dk/fhir/StructureDefinition/medcom-core-encounter" />
  <derivation value="constraint" />
  <differential>
    <element id="Encounter">
      <path value="Encounter" />
      <short value="An event where the patient changes to/from patient and citizen." />
      <definition value="An start or end interaction between a patient/citizen and healthcare organization for the purpose  of notifying  the municipalicy (at present)  of  hosptal arrival or dismission. The minicipality reacts on the notifications by halting for instance the planned   healthcare service(s) and/or  food deliverence." />
    </element>
    <element id="Encounter.extension">
      <path value="Encounter.extension" />
      <slicing>
        <discriminator>
          <type value="value" />
          <path value="url" />
        </discriminator>
        <rules value="open" />
      </slicing>
    </element>
    <element id="Encounter.extension:status-period">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <path value="Encounter.extension" />
      <sliceName value="status-period" />
      <short value="Extensions Element for status period" />
      <definition value="Extension for handling status periods. The status period start is registered when the encounter is created and the period end is registered when the Encounter status changes." />
      <min value="1" />
      <max value="1" />
      <type>
        <code value="Extension" />
        <profile value="http://medcom.dk/fhir/StructureDefinition/status-period" />
      </type>
    </element>
    <element id="Encounter.extension:status-period.value[x]">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <path value="Encounter.extension.value[x]" />
      <binding>
        <strength value="required" />
        <description value="Status Period" />
      </binding>
    </element>
    <element id="Encounter.status">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <path value="Encounter.status" />
      <short value="arrived  | in-progress | onleave | finished | cancelled | entered-in-error" />
      <definition value="For notification of hospitalization if the &#xD;&#xA;message is notification of admission the status shall be &quot;arrived&quot; or &quot;in-progress&quot;&#xD;&#xA;message is notifcation of ended hospitalization status shall be &quot;finished&quot;&#xD;&#xA;message is notifiation of leave of absence the status shall be &quot;onleave&quot;&#xD;&#xA;mesage is ended leave of absence the status shall be the previous state of the encounter&#xD;&#xA;message is a cancellation the status shall be &quot;cancelled&quot; &#xD;&#xA;message is a correction the status shall be &quot;entered-in-error&quot;" />
    </element>
    <element id="Encounter.class.system">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <path value="Encounter.class.system" />
      <max value="0" />
    </element>
    <element id="Encounter.type">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <path value="Encounter.type" />
      <max value="0" />
    </element>
    <element id="Encounter.type.coding.system">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <path value="Encounter.type.coding.system" />
      <definition value="The identification of the code system that defines the meaning of the symbol in the code.&#xD;&#xA;This resource is a notifcation of hospitalization." />
      <min value="1" />
    </element>
    <element id="Encounter.serviceType">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <path value="Encounter.serviceType" />
      <definition value="Broad categorization of the service that is to be provided.&#xD;&#xA;The serviceType element shall not be used in NotificationOfHospitalStayEncounter" />
      <max value="0" />
    </element>
    <element id="Encounter.priority">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <path value="Encounter.priority" />
      <definition value="Indicates the urgency or actions to expect of the encounter. The priority element shall not be used in NotificationOfHospitalStayEncounter" />
      <max value="0" />
    </element>
    <element id="Encounter.subject">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <path value="Encounter.subject" />
      <short value="The patient present at the encounter" />
      <definition value="The patient that is related to the encounter update notification." />
      <comment value="This resource will be exhanged by a Message transaction that is exhanged by a bundle resource. &#xD;&#xA;Reference to the source (patient) SHALL be a reference to the patient resource id. The patient resource is  referenced by the messageheader and the reference to the patient SHALL be resolveable. The Bundle containing the FHIR message shall only have one patient resource." />
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org/fhir/dk/core/StructureDefinition/medcom-core-patient" />
        <aggregation value="bundled" />
      </type>
    </element>
    <element id="Encounter.episodeOfCare">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <path value="Encounter.episodeOfCare" />
      <definition value="The encounter shall be classified as a part of a specific episode of care identifier.  This association can facilitate grouping of related encounters together for a specific purpose, such as government reporting, issue tracking, association via a common problem.  The association is recorded on the encounter as these are typically created after the episode of care and grouped on entry rather than editing the episode of care to append another encounter to it (the episode of care could span years)." />
      <min value="1" />
      <max value="1" />
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/EpisodeOfCare" />
      </type>
    </element>
    <element id="Encounter.episodeOfCare.identifier">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <path value="Encounter.episodeOfCare.identifier" />
      <short value="The identifier for danish &quot;forløbs-id&quot;" />
      <definition value="An identifier that represents the danish episode of care &quot;forløbs-is&quot; for the &quot;Landspatientregister&quot;." />
      <min value="1" />
      <max value="1" />
      <type>
        <code value="Identifier" />
        <profile value="http://hl7.dk/fhir/core/StructureDefinition/lpr3-Identifier" />
      </type>
    </element>
    <element id="Encounter.basedOn">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <path value="Encounter.basedOn" />
      <definition value="The sevice request this encounter satisfies (e.g. incoming referral or procedure request). The basedOn element shall not be used in NotificationOfHospitalStayEncounter" />
      <max value="0" />
    </element>
    <element id="Encounter.participant">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <path value="Encounter.participant" />
      <definition value="The list of people responsible for providing the service. The participant element shall not be used in NotificationOfHospitalStayEncounter" />
      <max value="0" />
    </element>
    <element id="Encounter.appointment">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <path value="Encounter.appointment" />
      <definition value="The appointment that scheduled this encounter.The appointment element shall not be used in NotificationOfHospitalStayEncounter" />
      <max value="0" />
    </element>
    <element id="Encounter.period">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <path value="Encounter.period" />
      <definition value="The start and end time of the encounter. For notification of hospitalization an start interval is always known as the notification of adminssion is trigged by the arrival of a patient. There a period will always exist as the notification of admission always starts the communication flow. Please that the encounter.period values always referes to the encounter start and end. The period of the leave of absence is not part of the notification of hospitalization FHIR resource ." />
      <min value="1" />
    </element>
    <element id="Encounter.period.start">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <path value="Encounter.period.start" />
      <definition value="Encounter Starting time.  &#xD;&#xA;For the notificationOfHospitalization a starting time is the timestamp that is registered by the hospital at patient physical arrival at the ward or emergency department." />
      <min value="1" />
    </element>
    <element id="Encounter.length">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <path value="Encounter.length" />
      <definition value="Quantity of time the encounter lasted. This excludes the time during leaves of absence. The length element shall not be used in NotificationOfHospitalStayEncounter" />
      <max value="0" />
    </element>
    <element id="Encounter.reasonCode">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <path value="Encounter.reasonCode" />
      <definition value="Reason the encounter takes place, expressed as a code. For admissions, this can be used for a coded admission diagnosis. The resaonCode element shall not be used in NotificationOfHospitalStayEncounter" />
      <max value="0" />
    </element>
    <element id="Encounter.reasonReference">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <path value="Encounter.reasonReference" />
      <definition value="References FHIR instances as Reason for the encounter. Indicates another resource whose existence justifies this Encounter. The reasonReference element shall not be used in NotificationOfHospitalStayEncounter." />
      <max value="0" />
    </element>
    <element id="Encounter.diagnosis">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-explicit-type-name">
        <valueString value="Diagnosis" />
      </extension>
      <path value="Encounter.diagnosis" />
      <definition value="The list of diagnosis relevant to this encounter. The dianosis element shall not be used in NotificationOfHospitalStayEncounter" />
      <max value="0" />
    </element>
    <element id="Encounter.account">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <path value="Encounter.account" />
      <definition value="The set of accounts and issurance information that may be used for billing for this Encounter. The account element shall not be used in NotificationOfHospitalStayEncounter" />
    </element>
    <element id="Encounter.hospitalization">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <path value="Encounter.hospitalization" />
      <definition value="Details about the admission to a regional or municipalicy  healthcare service. The hospitalization element shall not be used in NotificationOfHospitalStayEncounter" />
      <max value="0" />
    </element>
    <element id="Encounter.location">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <path value="Encounter.location" />
      <definition value="List of locations where  the patient has been during this encounter. The location element shall not be used in NotificationOfHospitalStayEncounter" />
      <max value="0" />
    </element>
    <element id="Encounter.serviceProvider">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <path value="Encounter.serviceProvider" />
      <definition value="The organization that is primarily responsible for this Encounter's services. &#xD;&#xA;This may be another organization that is defined as the MessageHeader source organization." />
      <min value="1" />
      <type>
        <code value="Reference" />
        <aggregation value="bundled" />
      </type>
    </element>
    <element id="Encounter.partOf">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
        <valueCode value="normative" />
      </extension>
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
        <valueCode value="4.0.0" />
      </extension>
      <path value="Encounter.partOf" />
      <definition value="The Encounter references an EpisodeOfCare instance. If Encounter shall be linked then use the EpisodeOfCare instance. The partOf element shall not be used in NotificationOfHospitalStayEncounter." />
      <max value="0" />
    </element>
  </differential>
</StructureDefinition>
